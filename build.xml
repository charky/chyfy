<project name="ChyFy" default="zip" basedir=".">
	
	<xmlproperty file="./addon.xml" />
	
	<property name="buildtempdir" location="./build/${addon(id)}" />
	<property name="buildtarget" location="${buildtempdir}.${addon(version)}.zip" />
	<property name="kodiaddondir" location="${user.home}/.kodi/addons/" />
	
	<target name="clean">
		<delete>
			<fileset dir="./build" includes="**/*.zip"/>
		</delete>
	</target>
	
	<target name="zip">
		<mkdir dir="${buildtempdir}" />
		<copy todir="${buildtempdir}">
			<fileset dir="./.">
				<exclude name="*.pyc" />
				<exclude name=" *.pyo" />
				<exclude name="resources/**" />
				<exclude name="sources/**" />
				<exclude name="build/**" />
				<exclude name="build.xml" />
				<exclude name=".*" />
				<exclude name=".*/**" />
			</fileset>
		</copy>
		
		<zip destfile="${buildtarget}" basedir="./build/" />
	</target>
	
	<target name="unzip">
		<unzip src="${buildtarget}" dest="${kodiaddondir}" overwrite="true" />
	</target>	
		
</project>